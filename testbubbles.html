<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="https://millikin-university.github.io/public/assets/css/experience.css" />
</head>
<body>
  <div class="mu--card">
    <div class="mu--card-link">
      <a href="https://www.millikin.edu" target="_blank"></a>
      <div class="mu--card-overlay"></div>
      <div class="mu--card-bg-image" style="background-image: url(https://millikin.edu/sites/default/files/styles/9_4__1728x768/public/2024-12/winterMU.jpg)"></div>
      <div class="mu--card-text-label">Title Text</div>
    </div>
  </div>
  <div class="mu--card-links" style="z-index: 104">
    <a id="phone" class="mu--modals"></a>
    <a id="mail" class="mu--modals"></a>
    <a id="search" class="mu--modals"></a>
    <a id="event" class="mu--modals"></a>
  </div>

  <div id="modal-shade" class="mu--modal-top mu--modal-closed mu--modal-shade-closed">
    <div id="indicator" class="mu--indicator mu-modal-closed"></div>
    <div id="event-modal" class="mu--modal-content mu--modal-closed">
      <p>Help text can go here. It even can have links to <a href="https://my.millikin.edu" target="_blank">other content</a>.</p>
      <p>Example of a List</p>
      <ul>
        <li>A</li>
        <li>B</li>
      </ul>
    </div>
    <div id="search-modal" class="mu--modal-content mu--modal-closed">
      <p>Search Engines</p>
      <ul>
        <li><a href="https://google.com" target="_blank">Google</a></li>
        <li><a href="https://bing.com" target="_blank">Bing</a></li>
        <li><a href="https://duckduckgo.com" target="_blank">DuckDuckGo</a></li>
      </ul>
    </div>
    <div id="phone-modal" class="mu--modal-content mu--modal-closed">
      <p>Phone Contacts</p>
      <ul style="list-style-type: '📞'">
        <li><a href="https://google.com" target="_blank">Google</a></li>
        <li><a href="https://bing.com" target="_blank">Bing</a></li>
        <li><a href="https://duckduckgo.com" target="_blank">DuckDuckGo</a></li>
      </ul>
    </div>
    <div id="mail-modal" class="mu--modal-content mu--modal-closed">
      <p>Contacts</p>
      <ul style="list-style-type: '✉️'">
        <li><a href="mailto:info@millikin.edu" target="_blank">Information</a></li>
        <li><a href="mailto:developer@millikin.edu" target="_blank">Developer</a></li>
        <li><a href="mailto:support@millikin.edu" target="_blank">Support</a></li>
      </ul>
    </div>
  </div>

  <script type="module">
    const shade = document.querySelector('#modal-shade');
    const indicator = document.querySelector('.mu--indicator');
    const modals = document.querySelectorAll('.mu--modals');
    modals.forEach(modalPrep);
    shade.addEventListener('click', closeModals); //Allows clicking on the shade to close all the open modals

    function closeModals() {
      const openModals = document.querySelectorAll('[data-open]');
      openModals.forEach(function (modal) {
        modal.toggleAttribute('data-open');
        modal.toggleAttribute('data-closed');
        const content = document.querySelector(`#${modal.id}-modal`);
        shade.classList.add('mu--modal-shade-closed');
        shade.classList.add('mu--modal-closed');
        shade.classList.remove('mu--modal-shade-open');
        shade.classList.remove('mu--modal-open');
        content.classList.add('mu--modal-closed');
        content.classList.remove('mu--modal-open');
        indicator.classList.add('mu--modal-closed');
        indicator.classList.remove('mu--modal-open');
      });
    }

    function openModal(id) {
      const modal = document.querySelector(`#${id}`);
      modal.toggleAttribute('data-closed');
      modal.toggleAttribute('data-open');
      const content = document.querySelector(`#${modal.id}-modal`);
      shade.classList.remove('mu--modal-shade-closed');
      shade.classList.remove('mu--modal-closed');
      shade.classList.add('mu--modal-shade-open');
      shade.classList.add('mu--modal-open');
      content.classList.remove('mu--modal-closed');
      content.classList.add('mu--modal-open');
      indicator.classList.remove('mu--modal-closed');
      indicator.classList.add('mu--modal-open');
      setIndicator(id);
    }

    function setIndicator(id) {
      const modal = document.querySelector(`#${id}`);
      const modalLocation = modal.getBoundingClientRect();
      if ((indicator.className = 'mu--indicator')) {
        // Top indicator
        const posTop = modalLocation.bottom;
        const posLeft = modalLocation.left + (modalLocation.right - modalLocation.left) / 2 - parseFloat(getComputedStyle(indicator).borderLeftWidth);
        indicator.style.top = posTop + 'px';
        indicator.style.left = posLeft + 'px';
      }
    }

    function modalPrep(modal) {
      const iconSpan = document.createElement('span');
      iconSpan.className = 'material-symbols-outlined';
      iconSpan.textContent = modal.id;
      modal.appendChild(iconSpan);
      modal.toggleAttribute('data-closed');
      closeModals();
      modal.addEventListener('click', function () {
        if (modal.hasAttribute('data-closed')) {
          closeModals();
          openModal(modal.id);
        } else {
          closeModals();
        }
      });
    }
  </script>
</body>
